<div class="">
    <div class="flex flex-col flex-auto form-Out">
        <div class="flex-auto">
            <div
                class="flex flex-col sm:flex-row items-center justify-between px-5 bg-primary_l py-4 bg-light-primary"
            >
                <div class="text-2xl font-semibold text-white truncate">
                    Update Status
                </div>
                <button
                    (click)="close()"
                    type="button"
                    mat-icon-button
                    matDialogClose
                >
                    <mat-icon
                        [svgIcon]="'heroicons_outline:x'"
                        class="text-white"
                    ></mat-icon>
                </button>
            </div>
            <form
                [formGroup]="createForm"
                class="flex flex-col create-form px-5 py-6"
            >
                <div class="flex flex-row gt-md:flex-row">
                    <mat-form-field
                        appearance="fill"
                        class="flex-auto fuse-mat-dense add-width w-full"
                    >
                        <mat-label>Status</mat-label>
                        <mat-select
                            [formControlName]="'status'"
                            (selectionChange)="selectedTimeline($event.value)"
                        >
                            <mat-option value="Completed">
                                Completed
                            </mat-option>
                            <mat-option value="Stopped"> Stopped </mat-option>
                            <mat-option value="Inprogress">
                                Inprogress</mat-option
                            >
                        </mat-select>
                    </mat-form-field>
                </div>
                <div class="flex flex-row gt-md:flex-row" *ngIf="showStatus">
                    <mat-form-field
                        appearance="fill"
                        class="flex-auto fuse-mat-dense w-full"
                    >
                        <mat-label>Stopped Date</mat-label>
                        <input
                            matInput
                            [matDatepicker]="pickerstop"
                            [formControlName]="'stopped_date'"
                            (click)="pickerstop.open()"
                            (dateInput)="addEvent('stopped', $event)"
                            (dateChange)="addEvent('stopped', $event)"
                        />
                        <mat-datepicker-toggle
                            matSuffix
                            [for]="pickerstop"
                        ></mat-datepicker-toggle>
                        <mat-datepicker #pickerstop></mat-datepicker>
                    </mat-form-field>
                    <mat-form-field
                        appearance="fill"
                        class="flex-auto fuse-mat-dense w-full ml-5"
                    >
                        <mat-label>Reason</mat-label>
                        <mat-select [formControlName]="'stoppedReason'">
                            <mat-option
                                [value]="e._id"
                                *ngFor="let e of reasons"
                            >
                                {{ e.name }}</mat-option
                            >
                        </mat-select>
                        <mat-error
                            *ngIf="
                                createForm
                                    .get('stoppedReason')
                                    .hasError('required')
                            "
                        >
                            Stopped Reason is required
                        </mat-error>
                    </mat-form-field>
                </div>
                <div class="" *ngIf="completedStatus">
                    <mat-form-field
                        appearance="fill"
                        class="flex-auto fuse-mat-dense w-60"
                    >
                        <mat-label>Completed Date</mat-label>
                        <input
                            matInput
                            [matDatepicker]="pickerComp"
                            [formControlName]="'completed_date'"
                            (click)="pickerComp.open()"
                            (dateInput)="addEvent('completed', $event)"
                            (dateChange)="addEvent('completed', $event)"
                        />
                        <mat-datepicker-toggle
                            matSuffix
                            [for]="pickerComp"
                        ></mat-datepicker-toggle>
                        <mat-datepicker #pickerComp></mat-datepicker>
                    </mat-form-field>
                </div>
                <div class="flex flex-col gt-md:flex-row">
                    <button
                        type="submit"
                        class="max-w-50 mat-focus-indicator rounded-2 mat-flat-button mat-button-base primary_btn_modal text-white"
                        mat-flat-button
                        (click)="save()"
                    >
                        Update Status
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
